<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>封装集合</title>
</head>
<body>
<script>
    // 封装集合类
    function Set(){
        // 属性
        this.items = {};

        // 方法
        // add方法
        Set.prototype.add = function (value){
            // 判断集合中是否已经包含了该元素
            if(this.has(value)){
                return false;
            }

            // 新元素添加到集合中(this.items[value]对象附加value属性)
            this.items[value] = value;
            return true; //添加成功
        }

        // has方法(判断集合中是否有这个元素)
        Set.prototype.has = function (value){
            return this.items.hasOwnProperty(value);
        }

        // remove方法
        Set.prototype.remove = function (value){
            // 判断集合中是否包含该元素
            if(!this.has(value)){ //判断条件取反，没有包含则执行
                return false;
            }

            // 将元素从属性中删除掉
            delete this.items[value];
            return true;
        }

        // clear方法
        Set.prototype.clear = function (){
            // 指向空对象，原先对象没有被引用自动回收
            this.items = {};
        }

        // size方法
        Set.prototype.size = function (){
            // 返回当前对象的长度
            return Object.keys(this.items).length;
        }

        // 获取集合中所有的值
        Set.prototype.values = function (){
            // 返回当前对象的所有元素
            return Object.keys(this.items);
        }



        // 集合间操作
        // 并集
        Set.prototype.union = function(otherSet){
            // this:集合对象A
            // otherSet:集合对象B
            // 创建新的集合
            var unionSet = new Set();

            // 将A集合种所有元素添加到新集合种
            var values = this.values();
            for(var i = 0; i < values.length; i++){
                unionSet.add(values[i]);
            }

            // 取出B集合中的元素，判断是否加入到新集合
            values = otherSet.values();
            for(var i = 0; i < value.length; i++){
                unionSet.add(values[i]);
            }

            return unionSet;
        }



    }

    // 测试Set类
    // 创建Set类对象
    var set = new Set();

    // 测试add方法
    alert(set.add('aaa'));
    alert(set.add('aaa')); // 重复添加
    alert(set.add('bbb'));
    alert(set.add('ccc'));
    alert(set.add('ddd'));
    alert(set.values());

    // 测试remove方法
    alert(set.remove('bbb'));
    alert(set.remove('bbb')); // 重复删除
    alert(set.remove('ddd'));
    alert(set.values());

    // 测试has方法
    alert(set.has('ccc'));

    // 测试size方法
    alert(set.size());

    // 测试clear方法
    alert(set.clear());
    alert(set.size());


    // 测试并集
    var setA = new Set();
    setA.add('aaa');
    setA.add('bbb');
    setA.add('ccc');

    var setB = new Set();
    setB.add('aaa');
    setB.add('ddd');
    setB.add('eee');

    // 求两个集合的并集
    setA.union(setB);
</script>
</body>
</html>